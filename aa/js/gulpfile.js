var gulp=require("gulp"),webserver=require("gulp-webserver"),url=require("url"),fs=require("fs"),path=require("path"),ziphtml=require("gulp-htmlmin"),zipcss=require("gulp-minify-css"),zipjs=require("gulp-uglify");gulp.task("webserver",function(){gulp.src(".").pipe(webserver({port:8888,middleware:function(e,p,i){var r=url.parse(e.url).pathname;"/"===r?p.end(fs.readFileSync(path.join(__dirname,"index.html"))):"/getdata"===r?p.end(fs.readFileSync(path.join(__dirname,"data.json"))):i()}}))}),gulp.task("ziphtml",function(){gulp.src("./*html").pipe(ziphtml({removeComments:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyCSS:!0,minifyJS:!0,collapseWhitespace:!0})).pipe(gulp.dest("./html/"))}),gulp.task("zipcss",function(){gulp.src("./*.css").pipe(zipcss()).pipe(gulp.dest("./css/"))}),gulp.task("zipjs",function(){gulp.src("./*.js").pipe(zipjs()).pipe(gulp.dest("./js/"))}),gulp.task("default",["webserver","ziphtml","zipcss","zipjs"]);